import{f as _,a as b}from"../chunks/Bu6yjzp-.js";import{o as Ct}from"../chunks/DeF66miZ.js";import{h as st,B as St,C as a,D as jt,F as s,G as o,x as t,I as n,J as e,n as ot,K as te}from"../chunks/BcDtKVn4.js";import{d as Mt,s as J}from"../chunks/BqWBJ0nJ.js";import{i as C}from"../chunks/BkkIdlLT.js";import{t as At,r as j,b as M,a as N}from"../chunks/B3X5vNgQ.js";import{g as Bt}from"../chunks/khNlM-83.js";function Ee(y,ae,A,p,m,i){var c=y.__className;if(st||c!==A||c===void 0){var f=At(A);(!st||f!==y.getAttribute("class"))&&(f==null?y.removeAttribute("class"):ae?y.className=f:y.setAttribute("class",f)),y.__className=A}return i}var Nt=_('<div class="bg-slate-800 rounded-xl p-8 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div> <p class="text-slate-400 mt-4">Loading settings...</p></div>'),Tt=_('<div class="bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded-lg mb-6"> </div>'),Ht=_('<div class="bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-6"> </div>'),Ft=_('<div><label class="block text-slate-300 mb-2">Confirm New Password</label> <input type="password" placeholder="Confirm password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div>'),Lt=_('<div><label class="block text-slate-300 mb-2">Username</label> <input type="text" placeholder="admin" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">New Password <span class="text-sm text-slate-400">(leave blank to keep current)</span></label> <input type="password" placeholder="Enter new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <!>',1),Dt=_('<button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Change Password</button>'),qt=_('<div class="space-y-4"><div><label class="block text-slate-300 mb-2">Current Password</label> <input type="password" placeholder="Enter current password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">New Password</label> <input type="password" placeholder="Enter new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">Confirm New Password</label> <input type="password" placeholder="Confirm new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div class="flex gap-3"><button class="flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button> <button class="px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Cancel</button></div></div>'),zt=_('<div class="bg-slate-800 rounded-xl p-6"><h2 class="text-xl font-semibold text-white mb-4">Change Password</h2> <!></div>'),Et=_(`<div class="mt-4 pt-4 border-t border-slate-700 space-y-4"><p class="text-slate-300 text-sm">If you find 8mb.local useful, consider supporting its development. Your support helps
							maintain the project and add new features!</p> <div class="flex flex-col gap-3 max-w-md mx-auto"><a href="https://www.paypal.me/jms1717" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.067 8.478c.492.88.556 2.014.3 3.327-.74 3.806-3.276 5.12-6.514 5.12h-.5a.805.805 0 00-.795.68l-.04.22-.63 3.993-.032.17a.804.804 0 01-.794.679H7.72a.483.483 0 01-.477-.558L7.418 21h1.518l.95-6.02h1.385c4.678 0 7.75-2.203 8.796-6.502z"></path><path d="M2.197 21.075a.484.484 0 01-.478-.558L3.05 9.935a.805.805 0 01.795-.681h4.97c1.194 0 2.024.232 2.62.61.555.352.98.845 1.28 1.44.315.627.485 1.406.485 2.326 0 .993-.214 1.914-.627 2.74-.394.788-.96 1.453-1.663 1.94-.665.462-1.477.792-2.41.962-.884.16-1.895.24-3.013.24H3.073a.483.483 0 00-.478.558l-.398 2.005z"></path></svg> Support via PayPal</a> <a href="https://github.com/JMS1717/8mb.local" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center gap-2 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-medium rounded-lg transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg> Star on GitHub</a></div> <p class="text-xs text-slate-500 text-center">Thank you for your support! ❤️</p></div>`),Jt=_('<!> <!> <div class="bg-slate-800 rounded-xl p-6 mb-6"><h2 class="text-xl font-semibold text-white mb-4">Authentication</h2> <div class="space-y-4"><div class="flex items-center justify-between"><label class="text-slate-300"><span class="font-medium">Require Authentication</span> <p class="text-sm text-slate-400 mt-1">When enabled, users must log in to access the app</p></label> <button><span></span></button></div> <!> <button class="w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button></div></div> <!> <div class="bg-slate-800 rounded-xl p-6 mb-6"><h2 class="text-xl font-semibold text-white mb-4">Default Presets</h2> <p class="text-sm text-slate-400 mb-4">Set default values that will load automatically when the app starts</p> <div class="space-y-4"><div><label class="block text-slate-300 mb-2">Default Target Size (MB)</label> <input type="number" min="1" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-slate-300 mb-2">Video Codec</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>AV1 (Best Quality)</option><option>HEVC (H.265)</option><option>H.264 (Most Compatible)</option></select></div> <div><label class="block text-slate-300 mb-2">Audio Codec</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>Opus (Default)</option><option>AAC</option></select></div> <div><label class="block text-slate-300 mb-2">Speed/Quality Preset</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>P1 (Fastest)</option><option>P2</option><option>P3</option><option>P4</option><option>P5</option><option>P6 (Balanced)</option><option>P7 (Best Quality)</option></select></div> <div><label class="block text-slate-300 mb-2">Audio Bitrate (kbps)</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>64</option><option>96</option><option>128 (Default)</option><option>160</option><option>192</option><option>256</option></select></div> <div><label class="block text-slate-300 mb-2">Container</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>MP4 (Most Compatible)</option><option>MKV</option></select></div> <div><label class="block text-slate-300 mb-2">Tune</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>High Quality (HQ)</option><option>Low Latency</option><option>Ultra Low Latency</option><option>Lossless</option></select></div></div> <button class="w-full px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button></div></div> <div class="bg-slate-800 rounded-xl p-6 text-center"><button class="w-full flex items-center justify-center gap-3 text-center"><div><h2 class="text-xl font-semibold text-white">Support the Project</h2> <p class="text-sm text-slate-400 mt-1">Help keep this project maintained and free</p></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>',1),Ot=_('<div class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8"><div class="max-w-2xl mx-auto"><div class="flex items-center justify-between mb-8"><h1 class="text-3xl font-bold text-white">Settings</h1> <button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">← Back to Home</button></div> <!></div></div>');function Wt(y,ae){St(ae,!0);let A=n(!0),p=n(!1),m=n(""),i=n(""),c=n(!1),f=n("admin"),h=n(""),O=n(""),Q=n(!1),B=n(""),k=n(""),T=n(""),U=n(!1),H=n(25),V=n("av1_nvenc"),K=n("libopus"),R=n("p6"),G=n(128),I=n("mp4"),W=n("hq");async function lt(){try{const[r,d]=await Promise.all([fetch("/api/settings/auth"),fetch("/api/settings/presets")]);if(r.ok){const u=await r.json();e(c,u.auth_enabled,!0),e(f,u.auth_user||"admin",!0)}if(d.ok){const u=await d.json();e(H,u.target_mb,!0),e(V,u.video_codec,!0),e(K,u.audio_codec,!0),e(R,u.preset,!0),e(G,u.audio_kbps,!0),e(I,u.container,!0),e(W,u.tune,!0)}}catch{e(i,"Failed to load settings")}finally{e(A,!1)}}async function rt(){if(e(i,""),e(m,""),t(c)&&!t(f).trim()){e(i,"Username is required when authentication is enabled");return}if(t(c)&&t(h)&&t(h)!==t(O)){e(i,"Passwords do not match");return}if(t(c)&&t(h)&&t(h).length<4){e(i,"Password must be at least 4 characters");return}e(p,!0);try{const r={auth_enabled:t(c),auth_user:t(f).trim()};t(c)&&t(h)&&(r.auth_pass=t(h));const d=await fetch("/api/settings/auth",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(d.ok){const u=await d.json();e(m,u.message||"Settings saved successfully!",!0),e(h,""),e(O,""),t(c)||setTimeout(()=>{window.location.href="/"},1500)}else{const u=await d.json();e(i,u.detail||"Failed to save settings",!0)}}catch{e(i,"Failed to save settings")}finally{e(p,!1)}}async function it(){if(e(i,""),e(m,""),t(H)<1){e(i,"Target size must be at least 1 MB");return}e(p,!0);try{const r=await fetch("/api/settings/presets",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({target_mb:t(H),video_codec:t(V),audio_codec:t(K),preset:t(R),audio_kbps:t(G),container:t(I),tune:t(W)})});if(r.ok){const d=await r.json();e(m,d.message||"Default presets saved successfully!",!0)}else{const d=await r.json();e(i,d.detail||"Failed to save presets",!0)}}catch{e(i,"Failed to save presets")}finally{e(p,!1)}}async function nt(){if(e(i,""),e(m,""),!t(B)||!t(k)){e(i,"All password fields are required");return}if(t(k)!==t(T)){e(i,"New passwords do not match");return}if(t(k).length<4){e(i,"Password must be at least 4 characters");return}e(p,!0);try{const r=await fetch("/api/settings/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:t(B),new_password:t(k)})});if(r.ok)e(m,"Password changed successfully!"),e(B,""),e(k,""),e(T,""),e(Q,!1);else{const d=await r.json();e(i,d.detail||"Failed to change password",!0)}}catch{e(i,"Failed to change password")}finally{e(p,!1)}}Ct(()=>{lt()});var se=Ot(),Je=s(se),oe=s(Je),dt=a(s(oe),2);dt.__click=()=>Bt("/"),o(oe);var ut=a(oe,2);{var ct=r=>{var d=Nt();b(r,d)},vt=r=>{var d=Jt(),u=ot(d);{var pt=l=>{var v=Tt(),w=s(v,!0);o(v),te(()=>J(w,t(m))),b(l,v)};C(u,l=>{t(m)&&l(pt)})}var Oe=a(u,2);{var bt=l=>{var v=Ht(),w=s(v,!0);o(v),te(()=>J(w,t(i))),b(l,v)};C(Oe,l=>{t(i)&&l(bt)})}var le=a(Oe,2),Qe=a(s(le),2),re=s(Qe),Y=a(s(re),2);Y.__click=()=>e(c,!t(c));var _t=s(Y);o(Y),o(re);var Ue=a(re,2);{var ft=l=>{var v=Lt(),w=ot(v),ee=a(s(w),2);j(ee),o(w);var F=a(w,2),x=a(s(F),2);j(x),o(F);var P=a(F,2);{var L=g=>{var S=Ft(),D=a(s(S),2);j(D),o(S),M(D,()=>t(O),q=>e(O,q)),b(g,S)};C(P,g=>{t(h)&&g(L)})}M(ee,()=>t(f),g=>e(f,g)),M(x,()=>t(h),g=>e(h,g)),b(l,v)};C(Ue,l=>{t(c)&&l(ft)})}var X=a(Ue,2);X.__click=rt;var ht=s(X,!0);o(X),o(Qe),o(le);var Ve=a(le,2);{var gt=l=>{var v=zt(),w=a(s(v),2);{var ee=x=>{var P=Dt();P.__click=()=>e(Q,!0),b(x,P)},F=x=>{var P=qt(),L=s(P),g=a(s(L),2);j(g),o(L);var S=a(L,2),D=a(s(S),2);j(D),o(S);var q=a(S,2),tt=a(s(q),2);j(tt),o(q);var at=a(q,2),z=s(at);z.__click=nt;var kt=s(z,!0);o(z);var Pt=a(z,2);Pt.__click=()=>{e(Q,!1),e(B,""),e(k,""),e(T,"")},o(at),o(P),te(()=>{z.disabled=t(p),J(kt,t(p)?"Changing...":"Change Password")}),M(g,()=>t(B),E=>e(B,E)),M(D,()=>t(k),E=>e(k,E)),M(tt,()=>t(T),E=>e(T,E)),b(x,P)};C(w,x=>{t(Q)?x(F,!1):x(ee)})}o(v),b(l,v)};C(Ve,l=>{t(c)&&l(gt)})}var ie=a(Ve,2),Ke=a(s(ie),4),ne=s(Ke),Re=a(s(ne),2);j(Re),o(ne);var de=a(ne,2),ue=s(de),ce=a(s(ue),2),ve=s(ce);ve.value=ve.__value="av1_nvenc";var pe=a(ve);pe.value=pe.__value="hevc_nvenc";var Ge=a(pe);Ge.value=Ge.__value="h264_nvenc",o(ce),o(ue);var be=a(ue,2),_e=a(s(be),2),fe=s(_e);fe.value=fe.__value="libopus";var Ie=a(fe);Ie.value=Ie.__value="aac",o(_e),o(be);var he=a(be,2),ge=a(s(he),2),me=s(ge);me.value=me.__value="p1";var we=a(me);we.value=we.__value="p2";var xe=a(we);xe.value=xe.__value="p3";var ye=a(xe);ye.value=ye.__value="p4";var ke=a(ye);ke.value=ke.__value="p5";var Pe=a(ke);Pe.value=Pe.__value="p6";var We=a(Pe);We.value=We.__value="p7",o(ge),o(he);var Ce=a(he,2),Se=a(s(Ce),2),je=s(Se);je.value=je.__value=64;var Me=a(je);Me.value=Me.__value=96;var Ae=a(Me);Ae.value=Ae.__value=128;var Be=a(Ae);Be.value=Be.__value=160;var Ne=a(Be);Ne.value=Ne.__value=192;var Ye=a(Ne);Ye.value=Ye.__value=256,o(Se),o(Ce);var Te=a(Ce,2),He=a(s(Te),2),Fe=s(He);Fe.value=Fe.__value="mp4";var Xe=a(Fe);Xe.value=Xe.__value="mkv",o(He),o(Te);var Ze=a(Te,2),Le=a(s(Ze),2),De=s(Le);De.value=De.__value="hq";var qe=a(De);qe.value=qe.__value="ll";var ze=a(qe);ze.value=ze.__value="ull";var $e=a(ze);$e.value=$e.__value="lossless",o(Le),o(Ze),o(de);var Z=a(de,2);Z.__click=it;var mt=s(Z,!0);o(Z),o(Ke),o(ie);var et=a(ie,2),$=s(et);$.__click=()=>e(U,!t(U));var wt=a(s($),2);o($);var xt=a($,2);{var yt=l=>{var v=Et();b(l,v)};C(xt,l=>{t(U)&&l(yt)})}o(et),te(()=>{Ee(Y,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t(c)?"bg-blue-600":"bg-slate-600"}`),Ee(_t,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t(c)?"translate-x-6":"translate-x-1"}`),X.disabled=t(p),J(ht,t(p)?"Saving...":"Save Settings"),Z.disabled=t(p),J(mt,t(p)?"Saving...":"Save Default Presets"),Ee(wt,0,`w-6 h-6 text-slate-400 transition-transform ${t(U)?"rotate-180":""}`)}),M(Re,()=>t(H),l=>e(H,l)),N(ce,()=>t(V),l=>e(V,l)),N(_e,()=>t(K),l=>e(K,l)),N(ge,()=>t(R),l=>e(R,l)),N(Se,()=>t(G),l=>e(G,l)),N(He,()=>t(I),l=>e(I,l)),N(Le,()=>t(W),l=>e(W,l)),b(r,d)};C(ut,r=>{t(A)?r(ct):r(vt,!1)})}o(Je),o(se),b(y,se),jt()}Mt(["click"]);export{Wt as component};
